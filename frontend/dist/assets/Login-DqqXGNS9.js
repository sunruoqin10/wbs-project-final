import{d as I,u as B,o as L,a as V,c as r,b as o,e as j,w as S,f as m,v as U,g as q,h as D,i as b,r as h,j as l,k as E,l as R}from"./index-BeQ_YpYi.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login-container"},F={class:"login-card"},H={class:"form-group"},N={class:"input-wrapper"},W={class:"form-group"},$={class:"input-wrapper"},P=["type"],G={key:0,class:"toggle-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"toggle-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={class:"form-options"},O={class:"checkbox-label"},Q=["disabled"],X={key:0},Y={key:1,class:"loading-spinner"},Z=I({__name:"Login",setup(ee){const f=E(),M=B(),i=h(),d=h(!1),u=h(!1),n=h({userId:"",password:"",remember:!1});let c=[],p=null;const _=()=>{if(!i.value)return;const t=i.value,e=t.getContext("2d");if(!e)return;t.width=window.innerWidth,t.height=window.innerHeight;const a=Math.floor(t.width*t.height/1e4);c=[];for(let s=0;s<a;s++)c.push({x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:Math.random()*3+1,opacity:Math.random()*.5+.2});const w=()=>{e.clearRect(0,0,t.width,t.height),c.forEach((s,z)=>{s.x+=s.vx,s.y+=s.vy,(s.x<0||s.x>t.width)&&(s.vx*=-1),(s.y<0||s.y>t.height)&&(s.vy*=-1),e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fillStyle=`rgba(100, 200, 255, ${s.opacity})`,e.fill(),c.slice(z+1).forEach(v=>{const k=s.x-v.x,y=s.y-v.y,x=Math.sqrt(k*k+y*y);x<150&&(e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(v.x,v.y),e.strokeStyle=`rgba(100, 200, 255, ${.15*(1-x/150)})`,e.lineWidth=1,e.stroke())})}),p=requestAnimationFrame(w)};w()},g=()=>{i.value&&(i.value.width=window.innerWidth,i.value.height=window.innerHeight)},C=async()=>{if(!n.value.userId||!n.value.password){alert("请输入用户ID和密码");return}u.value=!0;try{const t=await R.login(n.value.userId,n.value.password);M.setCurrentUser(t.user,t.token);const e=f.currentRoute.value.query.redirect||"/dashboard";f.push(e)}catch(t){alert(t.message||"登录失败，请检查用户ID和密码")}finally{u.value=!1}};return L(()=>{_(),window.addEventListener("resize",g)}),V(()=>{p!==null&&cancelAnimationFrame(p),window.removeEventListener("resize",g)}),(t,e)=>(l(),r("div",T,[o("canvas",{ref_key:"particleCanvas",ref:i,class:"particle-canvas"},null,512),o("div",F,[e[9]||(e[9]=j('<div class="login-header" data-v-a11a1225><div class="logo" data-v-a11a1225><svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" data-v-a11a1225><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-a11a1225></path></svg></div><h1 class="login-title" data-v-a11a1225>项目管理系统</h1><p class="login-subtitle" data-v-a11a1225>欢迎回来</p></div>',1)),o("form",{onSubmit:S(C,["prevent"]),class:"login-form"},[o("div",H,[o("div",N,[e[4]||(e[4]=o("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value.userId=a),type:"text",placeholder:"用户ID",required:"",class:"form-input"},null,512),[[U,n.value.userId]])])]),o("div",W,[o("div",$,[e[7]||(e[7]=o("svg",{class:"input-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1)),m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.password=a),type:d.value?"text":"password",placeholder:"密码",required:"",class:"form-input"},null,8,P),[[q,n.value.password]]),o("button",{type:"button",onClick:e[2]||(e[2]=a=>d.value=!d.value),class:"password-toggle"},[d.value?(l(),r("svg",J,[...e[6]||(e[6]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(l(),r("svg",G,[...e[5]||(e[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),o("div",K,[o("label",O,[m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.remember=a),type:"checkbox",class:"checkbox"},null,512),[[D,n.value.remember]]),e[8]||(e[8]=o("span",null,"记住我",-1))])]),o("button",{type:"submit",class:"login-button",disabled:u.value},[u.value?(l(),r("span",Y)):(l(),r("span",X,"登录"))],8,Q)],32),e[10]||(e[10]=o("div",{class:"login-footer"},[o("p",{class:"footer-text"},[b(" 登录即表示您同意我们的 "),o("a",{href:"#",class:"footer-link"},"服务条款"),b(" 和 "),o("a",{href:"#",class:"footer-link"},"隐私政策")])],-1))]),e[11]||(e[11]=o("div",{class:"bg-decoration"},[o("div",{class:"circle circle-1"}),o("div",{class:"circle circle-2"}),o("div",{class:"circle circle-3"})],-1))]))}}),te=A(Z,[["__scopeId","data-v-a11a1225"]]);export{te as default};
