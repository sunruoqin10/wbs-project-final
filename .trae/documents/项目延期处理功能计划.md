# é¡¹ç›®å»¶æœŸå¤„ç†åŠŸèƒ½è®¡åˆ’

## ä¸€ã€çŽ°çŠ¶åˆ†æž

### å½“å‰å·²æœ‰çš„å»¶æœŸåŠŸèƒ½

1. **TaskCard.vue** - å»¶æœŸé¢œè‰²æç¤º
   - å·²å»¶æœŸï¼šçº¢è‰²æ–‡å­—
   - å³å°†åˆ°æœŸï¼ˆ2å¤©å†…ï¼‰ï¼šæ©™è‰²æ–‡å­—
   - æ­£å¸¸ï¼šç°è‰²æ–‡å­—

2. **Dashboard.vue** - å‰©ä½™å¤©æ•°æ˜¾ç¤º
   - "å·²é€¾æœŸ X å¤©"
   - "ä»Šå¤©åˆ°æœŸ"
   - "æ˜Žå¤©åˆ°æœŸ"
   - "å‰©ä½™ X å¤©"

### ç¼ºå¤±çš„å»¶æœŸåŠŸèƒ½

| ç±»åˆ« | ç¼ºå¤±åŠŸèƒ½ |
|------|----------|
| æ•°æ®ç»“æž„ | å»¶æœŸçŠ¶æ€å­—æ®µã€å»¶æœŸåŽŸå› ã€åŽŸå§‹ç»“æŸæ—¥æœŸã€å»¶æœŸåŽ†å² |
| è®¡ç®—é€»è¾‘ | å»¶æœŸä»»åŠ¡ç»Ÿè®¡ã€å»¶æœŸå¤©æ•°è®¡ç®—ã€é£Žé™©é¢„è­¦é˜ˆå€¼ |
| UIå±•ç¤º | å»¶æœŸç­›é€‰å™¨ã€å»¶æœŸé¢„è­¦é¢æ¿ã€å»¶æœŸç»Ÿè®¡å›¾è¡¨ |
| æµç¨‹ç®¡ç† | å»¶æœŸåŽŸå› å½•å…¥ã€å»¶æœŸå®¡æ‰¹ã€å»¶æœŸå½±å“åˆ†æž |

---

## äºŒã€åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

### 1. æ•°æ®ç»“æž„æ‰©å±•

#### Task ç±»åž‹æ‰©å±• (types/index.ts)

```typescript
interface Task {
  // ... çŽ°æœ‰å­—æ®µ
  
  // æ–°å¢žå»¶æœŸç›¸å…³å­—æ®µ
  originalEndDate?: string;      // åŽŸå§‹ç»“æŸæ—¥æœŸï¼ˆé¦–æ¬¡åˆ›å»ºæ—¶è®°å½•ï¼‰
  overdueReason?: string;        // å»¶æœŸåŽŸå› 
  delayHistory?: DelayRecord[];  // å»¶æœŸåŽ†å²è®°å½•
}

interface DelayRecord {
  id: string;
  taskId: string;
  originalEndDate: string;
  newEndDate: string;
  reason: string;
  createdAt: string;
}
```

### 2. Store è®¡ç®—é€»è¾‘æ‰©å±•

#### task.ts æ–°å¢žæ–¹æ³•

```typescript
// èŽ·å–å»¶æœŸä»»åŠ¡åˆ—è¡¨
const getOverdueTasks = computed(() => {
  const now = dayjs();
  return tasks.value.filter(t => {
    if (t.status === 'done') return false;
    return dayjs(t.endDate).isBefore(now, 'day');
  });
});

// èŽ·å–å³å°†åˆ°æœŸä»»åŠ¡ï¼ˆé£Žé™©é¢„è­¦ï¼‰
const getTasksAtRisk = (daysThreshold: number = 3) => {
  const now = dayjs();
  return tasks.value.filter(t => {
    if (t.status === 'done') return false;
    const diff = dayjs(t.endDate).diff(now, 'day');
    return diff >= 0 && diff <= daysThreshold;
  });
};

// è®¡ç®—å»¶æœŸå¤©æ•°
const calculateOverdueDays = (endDate: string): number => {
  const now = dayjs();
  const end = dayjs(endDate);
  return now.diff(end, 'day');
};

// å»¶æœŸç»Ÿè®¡
const getOverdueStatistics = computed(() => {
  const overdue = getOverdueTasks.value;
  const atRisk = getTasksAtRisk(3);
  
  return {
    overdueCount: overdue.length,
    atRiskCount: atRisk.length,
    byPriority: {
      low: overdue.filter(t => t.priority === 'low').length,
      medium: overdue.filter(t => t.priority === 'medium').length,
      high: overdue.filter(t => t.priority === 'high').length,
      urgent: overdue.filter(t => t.priority === 'urgent').length,
    }
  };
});
```

### 3. UI å±•ç¤ºæ‰©å±•

#### 3.1 TaskBoard.vue - å»¶æœŸç­›é€‰å™¨

åœ¨ä»»åŠ¡çœ‹æ¿é¡¶éƒ¨æ·»åŠ å»¶æœŸç­›é€‰æŒ‰é’®ï¼š
- "å…¨éƒ¨" | "å»¶æœŸ" | "å³å°†åˆ°æœŸ"

#### 3.2 Reports.vue - å»¶æœŸç»Ÿè®¡å¡ç‰‡

æ–°å¢žç»Ÿè®¡å¡ç‰‡ï¼š
- å»¶æœŸä»»åŠ¡æ•°é‡ï¼ˆçº¢è‰²èƒŒæ™¯ï¼‰
- å³å°†åˆ°æœŸä»»åŠ¡æ•°é‡ï¼ˆæ©™è‰²èƒŒæ™¯ï¼‰

#### 3.3 Reports.vue - å»¶æœŸè¶‹åŠ¿å›¾è¡¨

æ–°å¢žå›¾è¡¨ï¼š
- å»¶æœŸä»»åŠ¡è¶‹åŠ¿å›¾ï¼ˆæŠ˜çº¿å›¾ï¼‰
- å»¶æœŸåŽŸå› åˆ†å¸ƒå›¾ï¼ˆé¥¼å›¾ï¼‰

#### 3.4 TaskModal.vue - å»¶æœŸåŽŸå› å½•å…¥

å½“ä¿®æ”¹ç»“æŸæ—¥æœŸä¸”æ–°æ—¥æœŸæ™šäºŽåŽŸæ—¥æœŸæ—¶ï¼š
- å¼¹å‡ºå»¶æœŸåŽŸå› è¾“å…¥æ¡†
- è®°å½•å»¶æœŸåŽ†å²

### 4. ç”˜ç‰¹å›¾å»¶æœŸé«˜äº®

åœ¨å¯¼å‡ºçš„ Excel ç”˜ç‰¹å›¾ä¸­ï¼š
- å»¶æœŸä»»åŠ¡ä½¿ç”¨çº¢è‰²èƒŒæ™¯
- æ­£å¸¸ä»»åŠ¡ä½¿ç”¨è“è‰²èƒŒæ™¯

---

## ä¸‰ã€å®žæ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåŸºç¡€åŠŸèƒ½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

| åºå· | ä»»åŠ¡ | æ–‡ä»¶ | è¯´æ˜Ž |
|------|------|------|------|
| 1 | æ‰©å±• Task ç±»åž‹ | types/index.ts | æ·»åŠ å»¶æœŸç›¸å…³å­—æ®µ |
| 2 | æ·»åŠ å»¶æœŸè®¡ç®—é€»è¾‘ | stores/task.ts | æ·»åŠ  getOverdueTasks ç­‰æ–¹æ³• |
| 3 | å»¶æœŸä»»åŠ¡ç­›é€‰å™¨ | views/TaskBoard.vue | æ·»åŠ å»¶æœŸç­›é€‰æŒ‰é’® |
| 4 | å»¶æœŸç»Ÿè®¡å¡ç‰‡ | views/Reports.vue | æ˜¾ç¤ºå»¶æœŸä»»åŠ¡æ•°é‡ |

### é˜¶æ®µäºŒï¼šå¢žå¼ºåŠŸèƒ½ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

| åºå· | ä»»åŠ¡ | æ–‡ä»¶ | è¯´æ˜Ž |
|------|------|------|------|
| 5 | å»¶æœŸåŽŸå› å½•å…¥ | components/task/TaskModal.vue | ä¿®æ”¹æ—¥æœŸæ—¶å½•å…¥åŽŸå›  |
| 6 | å»¶æœŸé¢„è­¦é€šçŸ¥ | components/common/Notification.vue | æ·»åŠ é¢„è­¦æç¤º |
| 7 | ç”˜ç‰¹å›¾å»¶æœŸé«˜äº® | utils/export.ts | å»¶æœŸä»»åŠ¡çº¢è‰²æ˜¾ç¤º |

### é˜¶æ®µä¸‰ï¼šé«˜çº§åŠŸèƒ½ï¼ˆä½Žä¼˜å…ˆçº§ï¼‰

| åºå· | ä»»åŠ¡ | æ–‡ä»¶ | è¯´æ˜Ž |
|------|------|------|------|
| 8 | å»¶æœŸåŽ†å²è®°å½• | types/index.ts, stores/task.ts | è®°å½•å»¶æœŸå˜æ›´åŽ†å² |
| 9 | å»¶æœŸè¶‹åŠ¿å›¾è¡¨ | views/Reports.vue | æ·»åŠ è¶‹åŠ¿åˆ†æžå›¾è¡¨ |
| 10 | å»¶æœŸå½±å“åˆ†æž | views/Reports.vue | åˆ†æžå»¶æœŸå¯¹é¡¹ç›®çš„å½±å“ |

---

## å››ã€é¢„æœŸæ•ˆæžœ

### ä»»åŠ¡çœ‹æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å…¨éƒ¨]  [å»¶æœŸ âš ï¸ 3]  [å³å°†åˆ°æœŸ â° 5]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     å¾…åŠž        â”‚     è¿›è¡Œä¸­      â”‚        å·²å®Œæˆ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                         â”‚
â”‚ â”‚ ä»»åŠ¡A       â”‚ â”‚ â”‚ ä»»åŠ¡B ðŸ”´    â”‚ â”‚  å»¶æœŸä»»åŠ¡çº¢è‰²è¾¹æ¡†       â”‚
â”‚ â”‚ ðŸ“… 01/15    â”‚ â”‚ â”‚ å·²é€¾æœŸ 2 å¤© â”‚ â”‚                         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ¥è¡¨ç»Ÿè®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç»Ÿè®¡æ¦‚è§ˆ                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»é¡¹ç›®æ•°   â”‚ å®ŒæˆçŽ‡     â”‚ å»¶æœŸä»»åŠ¡   â”‚ å³å°†åˆ°æœŸ               â”‚
â”‚    5       â”‚   75%      â”‚   3 âš ï¸     â”‚   5 â°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å»¶æœŸè¶‹åŠ¿åˆ†æž                                                â”‚
â”‚    ðŸ“ˆ                                                        â”‚
â”‚    â”‚     â•±â•²                                                  â”‚
â”‚    â”‚    â•±  â•²     â•±â•²                                         â”‚
â”‚    â”‚   â•±    â•²   â•±  â•²                                        â”‚
â”‚    â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”´â”€â”€                                    â”‚
â”‚       1æœˆ   2æœˆ   3æœˆ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å»¶æœŸåŽŸå› å½•å…¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¾‘ä»»åŠ¡                            [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»“æŸæ—¥æœŸ: 2024-01-20 â†’ 2024-01-25      â”‚
â”‚                                         â”‚
â”‚ âš ï¸ æ£€æµ‹åˆ°æ—¥æœŸå»¶æœŸ                       â”‚
â”‚                                         â”‚
â”‚ å»¶æœŸåŽŸå› :                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ éœ€æ±‚å˜æ›´ï¼Œéœ€è¦é¢å¤–å¼€å‘æ—¶é—´           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚           [å–æ¶ˆ]  [ç¡®è®¤å»¶æœŸ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€æŠ€æœ¯è¦ç‚¹

### 1. å»¶æœŸåˆ¤æ–­é€»è¾‘

```typescript
const isTaskOverdue = (task: Task): boolean => {
  if (task.status === 'done') return false;
  const now = dayjs().startOf('day');
  const endDate = dayjs(task.endDate).startOf('day');
  return endDate.isBefore(now);
};
```

### 2. å»¶æœŸå¤©æ•°è®¡ç®—

```typescript
const getOverdueDays = (task: Task): number => {
  if (!isTaskOverdue(task)) return 0;
  const now = dayjs().startOf('day');
  const endDate = dayjs(task.endDate).startOf('day');
  return now.diff(endDate, 'day');
};
```

### 3. é£Žé™©ç­‰çº§åˆ¤æ–­

```typescript
const getDelayRiskLevel = (task: Task): 'overdue' | 'high' | 'medium' | 'low' => {
  if (isTaskOverdue(task)) return 'overdue';
  
  const now = dayjs().startOf('day');
  const endDate = dayjs(task.endDate).startOf('day');
  const daysRemaining = endDate.diff(now, 'day');
  
  if (daysRemaining <= 1) return 'high';
  if (daysRemaining <= 3) return 'medium';
  return 'low';
};
```

---

## å…­ã€æ³¨æ„äº‹é¡¹

1. **æ•°æ®è¿ç§»**ï¼šæ·»åŠ æ–°å­—æ®µæ—¶ï¼Œéœ€è¦è€ƒè™‘çŽ°æœ‰æ•°æ®çš„å…¼å®¹æ€§
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå»¶æœŸè®¡ç®—ä½¿ç”¨ computed ç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—
3. **ç”¨æˆ·ä½“éªŒ**ï¼šå»¶æœŸæç¤ºè¦é†’ç›®ä½†ä¸æ‰“æ‰°ç”¨æˆ·æ­£å¸¸å·¥ä½œ
4. **å›½é™…åŒ–**ï¼šæ‰€æœ‰æ–°å¢žæ–‡æ¡ˆéœ€è¦æ·»åŠ ä¸­è‹±æ–‡æ”¯æŒ

---

## ä¸ƒã€æ€»ç»“

æœ¬è®¡åˆ’æ—¨åœ¨ä¸º WBS é¡¹ç›®ç®¡ç†ç³»ç»Ÿæ·»åŠ å®Œæ•´çš„é¡¹ç›®å»¶æœŸå¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

1. **å»¶æœŸè¯†åˆ«**ï¼šè‡ªåŠ¨è¯†åˆ«å»¶æœŸä»»åŠ¡å’Œå³å°†åˆ°æœŸä»»åŠ¡
2. **å»¶æœŸç»Ÿè®¡**ï¼šåœ¨æŠ¥è¡¨ä¸­å±•ç¤ºå»¶æœŸæ•°æ®å’Œè¶‹åŠ¿
3. **å»¶æœŸé¢„è­¦**ï¼šæä¾›å»¶æœŸé£Žé™©é¢„è­¦åŠŸèƒ½
4. **å»¶æœŸè®°å½•**ï¼šè®°å½•å»¶æœŸåŽŸå› å’Œå˜æ›´åŽ†å²

é€šè¿‡è¿™äº›åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©é¡¹ç›®ç»ç†æ›´å¥½åœ°æŽŒæŽ§é¡¹ç›®è¿›åº¦ï¼ŒåŠæ—¶å‘çŽ°å’Œå¤„ç†å»¶æœŸé£Žé™©ã€‚
